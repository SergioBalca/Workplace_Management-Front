{"ast":null,"code":"import _regeneratorRuntime from\"/home/shara/Workplace_Management/Backend/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/shara/Workplace_Management/Backend/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/shara/Workplace_Management/Backend/Frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/shara/Workplace_Management/Backend/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/home/shara/Workplace_Management/Backend/Frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/shara/Workplace_Management/Backend/Frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/shara/Workplace_Management/Backend/Frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/shara/Workplace_Management/Backend/Frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Link}from'react-router-dom';import Cookies from'universal-cookie';import axios from'axios';import styles from\"../../css/Login.module.css\";import logo from\"../../assets/imgs/logo.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var baseUrl='http://127.0.0.1:8000/api/login';var cookies=new Cookies();var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={form:{username:'',password:''}};_this.handleChange=function(e){_this.setState({form:_objectSpread(_objectSpread({},_this.state.form),{},_defineProperty({},e.target.name,e.target.value))});};_this.signIn=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(_this.state.form);_context.next=3;return axios.post(baseUrl,{username:_this.state.form.username,password:_this.state.form.password}).then(function(response){cookies.set('token',response.data);return response.data;}).then(function(response){if(response.length>0){var respuesta=response[0];cookies.set('id',respuesta.id,{path:'/'});cookies.set('last_login',respuesta.last_login,{path:'/'});cookies.set('is_superuser',respuesta.is_superuser,{path:'/'});cookies.set('username',respuesta.username,{path:'/'});cookies.set('email',respuesta.email,{path:'/'});cookies.set('first_name',respuesta.first_name,{path:'/'});cookies.set('last_name',respuesta.last_name,{path:'/'});cookies.set('full_name',respuesta.full_name,{path:'/'});cookies.set('birthday',respuesta.birthday,{path:'/'});cookies.set('gender',respuesta.gender,{path:'/'});cookies.set('verification_code',respuesta.verification_code,{path:'/'});cookies.set('is_staff',respuesta.is_staff,{path:'/'});cookies.set('is_active',respuesta.is_active,{path:'/'});cookies.set('date_joined',respuesta.date_joined,{path:'/'});cookies.set('updated',respuesta.updated,{path:'/'});cookies.set('order',respuesta.order,{path:'/'});cookies.set('age',respuesta.age,{path:'/'});cookies.set('groups',respuesta.groups,{path:'/'});cookies.set('user_permissions',respuesta.user_permissions,{path:'/'});window.location.href='./homepage';}else{alert('Username or password does not match');}}).catch(function(err){console.log(err);});case 3:case\"end\":return _context.stop();}}},_callee);}));return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){if(cookies.get('username')){window.location.href='./homepage';}}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(\"div\",{className:styles.container_login,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.login_box,children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logotype\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter your email address\",autoComplete:\"on\",name:\"emai\",id:\"emai\",onChange:this.handleChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter your password\",id:\"password\",onChange:this.handleChange}),/*#__PURE__*/_jsx(\"div\",{className:styles.btn_area,children:/*#__PURE__*/_jsx(\"button\",{className:styles.btn,onClick:function onClick(){return _this2.signIn(true);},children:\"Login\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-center links\",children:[\"Don't have an account?\\xA0\",/*#__PURE__*/_jsx(Link,{to:\"/signup\",href:\"#\",children:\"Register\"})]})]})});}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"names":["React","Component","Link","Cookies","axios","styles","logo","baseUrl","cookies","Login","state","form","username","password","handleChange","e","setState","target","name","value","signIn","console","log","post","then","response","set","data","length","respuesta","id","path","last_login","is_superuser","email","first_name","last_name","full_name","birthday","gender","verification_code","is_staff","is_active","date_joined","updated","order","age","groups","user_permissions","window","location","href","alert","catch","err","get","container_login","login_box","btn_area","btn"],"sources":["/home/shara/Workplace_Management/Backend/Frontend/src/components/pages/Login.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Cookies from 'universal-cookie';\nimport axios from 'axios';\n\nimport styles from \"../../css/Login.module.css\";\nimport logo from \"../../assets/imgs/logo.png\";\n\nconst baseUrl = 'http://127.0.0.1:8000/api/login';\nconst cookies = new Cookies();\n\n\nexport default class Login extends Component {\n  state = {\n    form: {\n      username: '',\n      password: ''\n    }\n  }\n\n  handleChange = e => {\n    this.setState({\n      form: {\n        ...this.state.form,\n        [e.target.name]: e.target.value\n      }\n    });\n  }\n\n\n  signIn = async () => {\n    console.log(this.state.form);\n    await axios.post(baseUrl, { username: this.state.form.username, password: this.state.form.password })\n      .then(response => {\n        cookies.set('token', response.data)\n        return response.data;\n      })\n      .then(response => {\n        if (response.length > 0) {\n          var respuesta = response[0];\n          cookies.set('id', respuesta.id, { path: '/' });\n          cookies.set('last_login', respuesta.last_login, { path: '/' });\n          cookies.set('is_superuser', respuesta.is_superuser, { path: '/' });\n          cookies.set('username', respuesta.username, { path: '/' });\n          cookies.set('email', respuesta.email, { path: '/' });\n          cookies.set('first_name', respuesta.first_name, { path: '/' });\n          cookies.set('last_name', respuesta.last_name, { path: '/' });\n          cookies.set('full_name', respuesta.full_name, { path: '/' });\n          cookies.set('birthday', respuesta.birthday, { path: '/' });\n          cookies.set('gender', respuesta.gender, { path: '/' });\n          cookies.set('verification_code', respuesta.verification_code, { path: '/' });\n          cookies.set('is_staff', respuesta.is_staff, { path: '/' });\n          cookies.set('is_active', respuesta.is_active, { path: '/' });\n          cookies.set('date_joined', respuesta.date_joined, { path: '/' });\n          cookies.set('updated', respuesta.updated, { path: '/' });\n          cookies.set('order', respuesta.order, { path: '/' });\n          cookies.set('age', respuesta.age, { path: '/' });\n          cookies.set('groups', respuesta.groups, { path: '/' });\n          cookies.set('user_permissions', respuesta.user_permissions, { path: '/' });\n\n          window.location.href = './homepage';\n\n        } else {\n          alert('Username or password does not match');\n        }\n      })\n      .catch(err => {\n        console.log(err);\n      })\n  }\n\n  componentDidMount() {\n    if (cookies.get('username')) {\n      window.location.href = './homepage';\n    }\n  }\n\n  render() {\n    return (\n      <div className={styles.container_login}>\n        <div className={styles.login_box}>\n\n          <img src={logo} alt=\"logotype\" />\n          <label htmlFor=\"email\">Email</label>\n          <input\n            type=\"text\"\n            placeholder=\"Enter your email address\"\n            autoComplete=\"on\"\n            name=\"emai\"\n            id=\"emai\"\n            onChange={this.handleChange}\n          />\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"password\"\n            placeholder=\"Enter your password\"\n            id=\"password\"\n            onChange={this.handleChange}\n          />\n          <div className={styles.btn_area}>\n            <button className={styles.btn} onClick={() => this.signIn(true)}>Login</button>\n          </div>\n          <div className=\"d-flex justify-content-center links\">\n            Don't have an account?&nbsp;\n            <Link to='/signup' href=\"#\">Register</Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}